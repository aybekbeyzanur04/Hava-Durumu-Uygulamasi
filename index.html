<!DOCTYPE html>
<html lang="tr">
<head>
<link rel="stylesheet" href="style.css" />  
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Türkiye Hava Durumu</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #e6f0ff;
  }
  h1 {
    text-align: center;
    margin-bottom: 15px;
  }
  #search-section {
    text-align: center;
    margin-bottom: 20px;
  }
  input[type="text"] {
    padding: 8px;
    width: 250px;
    font-size: 16px;
  }
  button {
    padding: 8px 15px;
    font-size: 16px;
    margin-left: 8px;
    cursor: pointer;
  }
  #error-message {
    background: #ffdddd;
    border: 1px solid #ff5c5c;
    color: #a70000;
    width: 300px;
    margin: 0 auto 20px;
    padding: 10px;
    display: none;
    border-radius: 5px;
    position: relative;
  }
  #error-message button {
    position: absolute;
    right: 8px;
    top: 5px;
    background: transparent;
    border: none;
    font-weight: bold;
    cursor: pointer;
    color: #a70000;
  }
  #cities-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
  }
  .city-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
    padding: 15px;
    width: 180px;
    text-align: center;
  }
  .city-name {
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 8px;
  }
  .temp {
    font-size: 22px;
    margin-bottom: 6px;
  }
  .desc {
    font-style: italic;
    color: #555;
    margin-bottom: 6px;
  }
  .icon {
    width: 50px;
    height: 50px;
  }
</style>
</head>
<body>

<h1>Türkiye Hava Durumu</h1>

<div id="search-section">
  <input type="text" id="city-input" placeholder="Şehir adı giriniz..." />
  <button id="search-btn">Ara</button>
</div>

<div id="error-message">
  <span id="error-text"></span>
  <button id="error-close">Tamam</button>
</div>

<div id="cities-container"></div>

<script>
// Türkiye'nin 81 ili (isimler küçük harfe çevrilmiş olacak arama için)
const cities = [
  "adana","adiyaman","afyonkarahisar","agri","aksaray","amasya","ankara","antalya","ardahan",
  "artvin","aydin","balikesir","bartin","batman","bayburt","bilecik","bingol","bitlis",
  "bolu","burdur","bursa","canakkale","cankiri","corum","denizli","diyarbakir","duzce",
  "edirne","elazig","erzincan","erzurum","eskisehir","gaziantep","giresun","gumushane","hakkari",
  "hatay","igdir","isparta","istanbul","izmir","kahramanmaras","karabuk","karaman","kars",
  "kastamonu","kayseri","kilis","kirikkale","kirklareli","kirsehir","kocaeli","konya",
  "kutahya","malatya","manisa","mardin","mersin","mugla","mus","nevsehir","nigde",
  "ordu","osmaniye","rize","sakarya","samsun","siirt","sinop","sirnak","sivas",
  "sanliurfa","tekirdag","tokat","trabzon","tunceli","usak","van","yalova","yozgat",
  "zonguldak"
];

// OpenWeatherMap API bilgileri
const API_KEY = "YOUR_API_KEY_HERE"; // Buraya kendi API anahtarınızı yazın

const citiesContainer = document.getElementById("cities-container");
const searchBtn = document.getElementById("search-btn");
const cityInput = document.getElementById("city-input");
const errorMessage = document.getElementById("error-message");
const errorText = document.getElementById("error-text");
const errorClose = document.getElementById("error-close");

// Fonksiyon: Hava durumunu API'den getir ve DOM'a ekle
async function fetchAndDisplayCity(cityName) {
  try {
    // API endpoint: Türkçe dil, metrik sıcaklık (Celsius)
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${cityName},TR&appid=${API_KEY}&units=metric&lang=tr`;
    const response = await fetch(url);
    if (!response.ok) throw new Error("API Hatası");
    const data = await response.json();

    // Kart oluştur
    const card = document.createElement("div");
    card.className = "city-card";

    const cityElem = document.createElement("div");
    cityElem.className = "city-name";
    cityElem.textContent = data.name;

    const tempElem = document.createElement("div");
    tempElem.className = "temp";
    tempElem.textContent = `${Math.round(data.main.temp)} °C`;

    const descElem = document.createElement("div");
    descElem.className = "desc";
    descElem.textContent = data.weather[0].description;

    const iconElem = document.createElement("img");
    iconElem.className = "icon";
    iconElem.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
    iconElem.alt = data.weather[0].description;

    card.appendChild(cityElem);
    card.appendChild(iconElem);
    card.appendChild(tempElem);
    card.appendChild(descElem);

    citiesContainer.appendChild(card);

  } catch (err) {
    console.error(err);
  }
}

// Tüm şehirleri getir ve göster
async function showAllCities() {
  citiesContainer.innerHTML = "";
  for (const city of cities) {
    await fetchAndDisplayCity(city);
  }
}

// Hata mesajını göster
function showError(message) {
  errorText.textContent = message;
  errorMessage.style.display = "block";
}

// Hata mesajını gizle
function hideError() {
  errorMessage.style.display = "none";
}

// Arama işlemi
async function searchCity() {
  const input = cityInput.value.trim().toLowerCase();
  if (input === "") {
    // Boşsa tüm şehirleri göster
    showAllCities();
    return;
  }
  if (!cities.includes(input)) {
    showError("Hata: Geçersiz şehir adı! Lütfen Türkiye'deki bir şehir adı girin.");
    return;
  }
  // Geçerli şehir, sadece onu göster
  citiesContainer.innerHTML = "";
  await fetchAndDisplayCity(input);
}

// Event listeners
searchBtn.addEventListener("click", () => {
  hideError();
  searchCity();
});

cityInput.addEventListener("keyup", (e) => {
  if (e.key === "Enter") {
    hideError();
    searchCity();
  }
});

errorClose.addEventListener("click", () => {
  hideError();
  cityInput.value = "";
  showAllCities();
});

// Sayfa yüklendiğinde tüm şehirleri göster
window.onload = () => {
  showAllCities();
};
</script>

</body>
</html>

